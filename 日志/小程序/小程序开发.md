调用wx.login后，获取登录凭证给后台，后台需调用 code2Session，使用 code 换取 openid、unionid、session_key 等信息；
1. 小程序 wx.getUserProfile 与插件 wx.getUserInfo 接口兼容基础库 2.27.1 以下版本的头像昵称获取需求：对于来自低版本的基础库与微信客户端的访问，小程序通过 wx.getUserProfile 接口将正常返回用户头像昵称，插件通过 wx.getUserInfo 接口将正常返回用户头像昵称，开发者可继续使用以上能力做向下兼容。
目前小程序开发者可以通过 wx.login 接口直接获取用户的 openId 与 unionId 信息，实现微信身份登录。对许多小程序使用场景，用户无需提供头像昵称。如有必要场景需收集用户头像昵称，可在个人中心或设置等页面让用户完善个人资料。

1. 获取用户的头像，昵称等直接调用`uni.getUserProfile()`方法即可
2. wx.login获取code---->后端请求微信服务器获取解密信息----->


### uniapp生命周期
![[Pasted image 20230605154912.png]]


上传文件---chooseMessageFile打开微信群聊  /webview 嵌套H5实现文件选择
// 截取两位小数
	function getBit (value, bit = 3) {
	  let str = value.toString();
	  let strIndex = str.indexOf('.');
	  if (strIndex === -1) return str;
	  str = str.substring(0, strIndex + bit);
	  console.log(str, bit);
	  return str;
	}